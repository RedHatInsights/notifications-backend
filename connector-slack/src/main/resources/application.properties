# Slack Connector Configuration - Quarkus-based

# Kafka messaging configuration
mp.messaging.incoming.incoming-notifications.connector=smallrye-kafka
mp.messaging.incoming.incoming-notifications.topic=${CONNECTOR_INCOMING_TOPIC:platform.notifications.tocamel}
mp.messaging.incoming.incoming-notifications.group.id=${CONNECTOR_GROUP_ID:integrations}
mp.messaging.incoming.incoming-notifications.key.deserializer=org.apache.kafka.common.serialization.StringDeserializer
mp.messaging.incoming.incoming-notifications.value.deserializer=org.apache.kafka.common.serialization.StringDeserializer
mp.messaging.incoming.incoming-notifications.cloud-events=true
mp.messaging.incoming.incoming-notifications.auto.offset.reset=earliest
mp.messaging.incoming.incoming-notifications.enable.auto.commit=true

# Outgoing Kafka configuration
mp.messaging.outgoing.outgoing-notifications.connector=smallrye-kafka
mp.messaging.outgoing.outgoing-notifications.topic=${CONNECTOR_OUTGOING_TOPIC:platform.notifications.fromcamel}
mp.messaging.outgoing.outgoing-notifications.key.serializer=org.apache.kafka.common.serialization.StringSerializer
mp.messaging.outgoing.outgoing-notifications.value.serializer=org.apache.kafka.common.serialization.StringSerializer
mp.messaging.outgoing.outgoing-notifications.cloud-events=true

# Slack REST client configuration
quarkus.rest-client.slack-client.url=${SLACK_BASE_URL:https://hooks.slack.com}
quarkus.rest-client.slack-client.connection-pool-size=20
quarkus.rest-client.slack-client.connection-ttl=30s
quarkus.rest-client.slack-client.max-redirects=3
quarkus.rest-client.slack-client.timeout=30s

# Fault tolerance configuration
quarkus.smallrye-fault-tolerance.timeout=30s
quarkus.smallrye-fault-tolerance.retry.max-retries=3
quarkus.smallrye-fault-tolerance.retry.delay=1s
quarkus.smallrye-fault-tolerance.retry.max-duration=10s
quarkus.smallrye-fault-tolerance.circuit-breaker.failure-threshold=5
quarkus.smallrye-fault-tolerance.circuit-breaker.delay=5s

# Metrics configuration
quarkus.micrometer.export.prometheus.enabled=true
quarkus.micrometer.export.prometheus.path=/q/metrics

# Logging configuration
quarkus.log.level=INFO
quarkus.log.category."com.redhat.cloud.notifications.connector.slack".level=DEBUG

# Health check configuration
quarkus.smallrye-health.ui.enable=true

# Slack connector specific configuration
slack.connector.timeout=${SLACK_TIMEOUT:30s}
slack.connector.max-retries=${SLACK_MAX_RETRIES:3}
slack.connector.webhook-url-pattern=${SLACK_WEBHOOK_URL_PATTERN:https://hooks.slack.com/.*}
