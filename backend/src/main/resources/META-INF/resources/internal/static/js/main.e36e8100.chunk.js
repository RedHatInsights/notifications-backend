(this.webpackJsonpinternal=this.webpackJsonpinternal||[]).push([[0],{436:function(e,t,a){},651:function(e,t,a){"use strict";a.r(t);a(336);var n,i,l=a(59),r=a(6),o=a.n(r),c=a(134),s=a.n(c),u=a(82),d=a(181),p=a(15),m=(a(436),a(723)),b=a(708),j=a(326),y=a(671),v=a(426),_=a(257),h=a(713),f=a(424),O=a(104),E=a(668),g=a(709),x=a(672),R=a(670),T=a(17),w="\n// Here we can initialize the value of the Aggregation result.\nconst result = {\n};\n\n// This function will be called by every action that was sent to notification server\n// to update the result with its values.\nconst aggregate = (action) => {\n\n    return result;\n};\n".trimLeft(),I=a(8),V=a.n(I),C=a(180),A=a(673),P=a(674),B=a(61),N=r.createContext({isAdmin:!1,applications:[],roles:[],refresh:function(){throw new Error("Invalid use of refresh")}}),k=function(){var e=Object(r.useContext)(N),t=Object(r.useCallback)((function(t){return!!e.isAdmin||void 0!==e.applications.find((function(e){return e.id===t}))}),[e]);return Object(B.a)(Object(B.a)({},e),{},{hasPermission:t})},S=a(416),G=a(675),D=a(676),q=function(e){return Object(T.jsxs)(y.a,{children:[Object(T.jsx)(x.a,{headingLevel:"h1",children:Object(T.jsx)(A.a,{children:Object(T.jsxs)(P.a,{target:"#",children:["Aggregation Email Template for ",e.applicationName]})})}),Object(T.jsxs)(S.a,{children:[Object(T.jsx)(G.a,{children:"Application: ".concat(e.applicationName," ")}),Object(T.jsx)(D.a,{children:"Bundle: ".concat(e.bundleName)}),Object(T.jsx)(D.a,{children:"Aggregation Template: ".concat(Object(T.jsx)(d.b,{to:"",children:e.templateName}))})]})]})},L=a(716),M=a(717),U=a(287),F=a(200),H=a(683),z=a(684),Q=a(685),J=a(714),W=a(680),Y=a(681),$=a(711),K=a(682),X=a(710),Z=a(30),ee=a(31);!function(e){e.AddAccessRequest=ee.f({application_id:f().optional().nullable(),role:ee.h().optional().nullable()}).nonstrict(),e.AddApplicationRequest=ee.f({bundle_id:f(),display_name:ee.h(),name:ee.h(),owner_role:ee.h().optional().nullable()}).nonstrict(),e.AggregationEmailTemplate=ee.f({application:a().optional().nullable(),application_id:f().optional().nullable(),body_template:h().optional().nullable(),body_template_id:f(),created:ee.h().optional().nullable(),id:f().optional().nullable(),subject_template:h().optional().nullable(),subject_template_id:f(),subscription_type:s(),updated:ee.h().optional().nullable()}).nonstrict(),e.Application=t(),e.Application1=a(),e.BasicAuthentication=n(),e.BehaviorGroup=ee.f({actions:ee.a(i()).optional().nullable(),bundle:r().optional().nullable(),bundle_id:f(),created:ee.h().optional().nullable(),default_behavior:ee.b().optional().nullable(),display_name:ee.h(),id:f().optional().nullable(),updated:ee.h().optional().nullable()}).nonstrict(),e.BehaviorGroupAction=i(),e.BehaviorGroupActionId=l(),e.Bundle=r(),e.CamelProperties=o(),e.CurrentStatus=ee.f({end_time:ee.h().optional().nullable(),start_time:ee.h().optional().nullable(),status:_()}).nonstrict(),e.EmailSubscriptionProperties=c(),e.EmailSubscriptionType=s(),e.Endpoint=u(),e.EndpointPage=ee.f({data:ee.a(u()),links:ee.g(ee.h()),meta:v()}).nonstrict(),e.EndpointProperties=ee.j(),e.EndpointType=d(),e.Environment=p(),e.EventLogEntry=m(),e.EventLogEntryAction=b(),e.EventType=j(),e.Facet=function e(){return ee.f({children:ee.a(ee.d((function(){return e()}))).optional().nullable(),displayName:ee.h(),id:ee.h(),name:ee.h()}).nonstrict()}(),e.HttpType=y(),e.InstantEmailTemplate=ee.f({body_template:h().optional().nullable(),body_template_id:f(),created:ee.h().optional().nullable(),event_type:j().optional().nullable(),event_type_id:f().optional().nullable(),id:f().optional().nullable(),subject_template:h().optional().nullable(),subject_template_id:f(),updated:ee.h().optional().nullable()}).nonstrict(),e.InternalApplicationUserPermission=ee.f({application_display_name:ee.h(),application_id:f(),role:ee.h()}).nonstrict(),e.InternalRoleAccess=ee.f({application_id:f(),id:f().optional().nullable(),role:ee.h()}).nonstrict(),e.InternalUserPermissions=ee.f({applications:ee.a(t()),is_admin:ee.b(),roles:ee.a(ee.h())}).nonstrict(),e.MessageValidationResponse=ee.f({errors:ee.g(ee.a(ee.h()))}).nonstrict(),e.Meta=v(),e.NotificationHistory=ee.f({created:ee.h().optional().nullable(),details:ee.g(ee.j()).optional().nullable(),endpointId:f().optional().nullable(),endpointSubType:ee.h().optional().nullable(),endpointType:d().optional().nullable(),id:f().optional().nullable(),invocationResult:ee.b(),invocationTime:ee.e().int()}).nonstrict(),e.PageEventLogEntry=ee.f({data:ee.a(m()),links:ee.g(ee.h()),meta:v()}).nonstrict(),e.PageEventType=ee.f({data:ee.a(j()),links:ee.g(ee.h()),meta:v()}).nonstrict(),e.RenderEmailTemplateRequest=ee.f({body_template:ee.h(),payload:ee.h(),subject_template:ee.h()}).nonstrict(),e.RequestDefaultBehaviorGroupPropertyList=ee.f({ignore_preferences:ee.b(),only_admins:ee.b()}).nonstrict(),e.RequestEmailSubscriptionProperties=ee.f({group_id:f().optional().nullable(),only_admins:ee.b()}).nonstrict(),e.ServerInfo=ee.f({environment:p().optional().nullable()}).nonstrict(),e.Status=_(),e.Template=h(),e.UUID=f(),e.WebhookProperties=O(),e.__Empty=ee.h().max(0).optional();function t(){return ee.f({display_name:ee.h(),id:f()}).nonstrict()}function a(){return ee.f({bundle_id:f(),created:ee.h().optional().nullable(),display_name:ee.h(),id:f().optional().nullable(),name:ee.h(),updated:ee.h().optional().nullable()}).nonstrict()}function n(){return ee.f({password:ee.h().optional().nullable(),username:ee.h().optional().nullable()}).nonstrict()}function i(){return ee.f({created:ee.h().optional().nullable(),endpoint:u().optional().nullable(),id:l().optional().nullable()}).nonstrict()}function l(){return ee.f({behaviorGroupId:f(),endpointId:f()}).nonstrict()}function r(){return ee.f({created:ee.h().optional().nullable(),display_name:ee.h(),id:f().optional().nullable(),name:ee.h(),updated:ee.h().optional().nullable()}).nonstrict()}function o(){return ee.f({basic_authentication:n().optional().nullable(),disable_ssl_verification:ee.b(),extras:ee.g(ee.h()).optional().nullable(),secret_token:ee.h().optional().nullable(),sub_type:ee.h().optional().nullable(),url:ee.h()}).nonstrict()}function c(){return ee.f({group_id:f().optional().nullable(),ignore_preferences:ee.b(),only_admins:ee.b()}).nonstrict()}function s(){return ee.c(["INSTANT","DAILY"])}function u(){return ee.f({created:ee.h().optional().nullable(),description:ee.h(),enabled:ee.b().optional().nullable(),id:f().optional().nullable(),name:ee.h(),properties:ee.i([O(),c(),o()]).optional().nullable(),sub_type:ee.h().optional().nullable(),type:d(),updated:ee.h().optional().nullable()}).nonstrict()}function d(){return ee.c(["webhook","email_subscription","default","camel"])}function p(){return ee.c(["PROD","STAGE","EPHEMERAL","LOCAL_SERVER"])}function m(){return ee.f({actions:ee.a(b()),application:ee.h(),bundle:ee.h(),created:ee.h(),event_type:ee.h(),id:f(),payload:ee.h().optional().nullable()}).nonstrict()}function b(){return ee.f({details:ee.g(ee.j()).optional().nullable(),endpoint_id:f().optional().nullable(),endpoint_sub_type:ee.h().optional().nullable(),endpoint_type:d(),id:f(),invocation_result:ee.b()}).nonstrict()}function j(){return ee.f({application:a().optional().nullable(),application_id:f(),description:ee.h().optional().nullable(),display_name:ee.h(),id:f().optional().nullable(),name:ee.h()}).nonstrict()}function y(){return ee.c(["GET","POST","PUT"])}function v(){return ee.f({count:ee.e().int()}).nonstrict()}function _(){return ee.c(["UP","MAINTENANCE"])}function h(){return ee.f({created:ee.h().optional().nullable(),data:ee.h(),description:ee.h(),id:f().optional().nullable(),name:ee.h(),updated:ee.h().optional().nullable()}).nonstrict()}function f(){return ee.h()}function O(){return ee.f({basic_authentication:n().optional().nullable(),disable_ssl_verification:ee.b(),method:y(),secret_token:ee.h().optional().nullable(),url:ee.h()}).nonstrict()}}(n||(n={})),function(e){var t,a,i,r,o,c,s,u,d,p,m,b,j,y,v,_,h,f,O,E,g,x,R,T,w,I,V,C,A,P,B,N,k,S,G,D,q,L,M,U,F,H,z,Q,J,W,Y,$,K,X,te,ae,ne,ie,le,re,oe;(t||(t=e.InternalResourceHttpRoot||(e.InternalResourceHttpRoot={}))).actionCreator=function(){return Object(l.actionBuilder)("GET","./").queryParams({}).config({rules:[new Z.ValidateRule(n.__Empty,"__Empty",204),new Z.ValidateRule(n.__Empty,"__Empty",401),new Z.ValidateRule(n.__Empty,"__Empty",403)]}).build()},function(e){var t=ee.a(n.InternalApplicationUserPermission);e.actionCreator=function(){return Object(l.actionBuilder)("GET","./access").queryParams({}).config({rules:[new Z.ValidateRule(t,"unknown",200),new Z.ValidateRule(n.__Empty,"__Empty",401),new Z.ValidateRule(n.__Empty,"__Empty",403)]}).build()}}(a||(a=e.InternalPermissionResourceGetAccessList||(e.InternalPermissionResourceGetAccessList={}))),(i||(i=e.InternalPermissionResourceAddAccess||(e.InternalPermissionResourceAddAccess={}))).actionCreator=function(e){return Object(l.actionBuilder)("POST","./access").queryParams({}).data(e.body).config({rules:[new Z.ValidateRule(n.InternalRoleAccess,"InternalRoleAccess",200),new Z.ValidateRule(n.__Empty,"__Empty",401),new Z.ValidateRule(n.__Empty,"__Empty",403)]}).build()},(r||(r=e.InternalPermissionResourceGetPermissions||(e.InternalPermissionResourceGetPermissions={}))).actionCreator=function(){return Object(l.actionBuilder)("GET","./access/me").queryParams({}).config({rules:[new Z.ValidateRule(n.InternalUserPermissions,"InternalUserPermissions",200),new Z.ValidateRule(n.__Empty,"__Empty",401),new Z.ValidateRule(n.__Empty,"__Empty",403)]}).build()},(o||(o=e.InternalPermissionResourceDeleteAccess||(e.InternalPermissionResourceDeleteAccess={}))).actionCreator=function(e){var t="./access/{internalRoleAccessId}".replace("{internalRoleAccessId}",e.internalRoleAccessId.toString());return Object(l.actionBuilder)("DELETE",t).queryParams({}).config({rules:[new Z.ValidateRule(n.__Empty,"__Empty",204),new Z.ValidateRule(n.__Empty,"__Empty",401),new Z.ValidateRule(n.__Empty,"__Empty",403)]}).build()},s=c||(c=e.AdminResourceDebugRbac||(e.AdminResourceDebugRbac={})),ee.h(),s.actionCreator=function(e){var t={};return void 0!==e.rhid&&(t.rhid=e.rhid),Object(l.actionBuilder)("GET","./admin").queryParams(t).config({rules:[new Z.ValidateRule(n.__Empty,"__Empty",200),new Z.ValidateRule(n.__Empty,"__Empty",401),new Z.ValidateRule(n.__Empty,"__Empty",403)]}).build()},d=u||(u=e.AdminResourceSetAdminDown||(e.AdminResourceSetAdminDown={})),ee.h(),d.actionCreator=function(e){var t={};return void 0!==e.status&&(t.status=e.status),Object(l.actionBuilder)("POST","./admin/status").queryParams(t).config({rules:[new Z.ValidateRule(n.__Empty,"__Empty",200),new Z.ValidateRule(n.__Empty,"__Empty",401),new Z.ValidateRule(n.__Empty,"__Empty",403)]}).build()},(p||(p=e.AdminResourceMigrate||(e.AdminResourceMigrate={}))).actionCreator=function(){return Object(l.actionBuilder)("PUT","./admin/templates/migrate").queryParams({}).config({rules:[new Z.ValidateRule(n.__Empty,"__Empty",204),new Z.ValidateRule(n.__Empty,"__Empty",401),new Z.ValidateRule(n.__Empty,"__Empty",403)]}).build()},(m||(m=e.AdminResourceDeleteAllTemplates||(e.AdminResourceDeleteAllTemplates={}))).actionCreator=function(){return Object(l.actionBuilder)("DELETE","./admin/templates/migrate").queryParams({}).config({rules:[new Z.ValidateRule(n.__Empty,"__Empty",204),new Z.ValidateRule(n.__Empty,"__Empty",401),new Z.ValidateRule(n.__Empty,"__Empty",403)]}).build()},(b||(b=e.InternalResourceCreateApplication||(e.InternalResourceCreateApplication={}))).actionCreator=function(e){return Object(l.actionBuilder)("POST","./applications").queryParams({}).data(e.body).config({rules:[new Z.ValidateRule(n.Application1,"Application1",200),new Z.ValidateRule(n.__Empty,"__Empty",401),new Z.ValidateRule(n.__Empty,"__Empty",403)]}).build()},(j||(j=e.InternalResourceGetApplication||(e.InternalResourceGetApplication={}))).actionCreator=function(e){var t="./applications/{appId}".replace("{appId}",e.appId.toString());return Object(l.actionBuilder)("GET",t).queryParams({}).config({rules:[new Z.ValidateRule(n.Application1,"Application1",200),new Z.ValidateRule(n.__Empty,"__Empty",401),new Z.ValidateRule(n.__Empty,"__Empty",403)]}).build()},(y||(y=e.InternalResourceUpdateApplication||(e.InternalResourceUpdateApplication={}))).actionCreator=function(e){var t="./applications/{appId}".replace("{appId}",e.appId.toString());return Object(l.actionBuilder)("PUT",t).queryParams({}).data(e.body).config({rules:[new Z.ValidateRule(n.__Empty,"__Empty",200),new Z.ValidateRule(n.__Empty,"__Empty",401),new Z.ValidateRule(n.__Empty,"__Empty",403)]}).build()},function(e){var t=ee.b();e.actionCreator=function(e){var a="./applications/{appId}".replace("{appId}",e.appId.toString());return Object(l.actionBuilder)("DELETE",a).queryParams({}).config({rules:[new Z.ValidateRule(t,"unknown",200),new Z.ValidateRule(n.__Empty,"__Empty",401),new Z.ValidateRule(n.__Empty,"__Empty",403)]}).build()}}(v||(v=e.InternalResourceDeleteApplication||(e.InternalResourceDeleteApplication={}))),function(e){var t=ee.a(n.EventType);e.actionCreator=function(e){var a="./applications/{appId}/eventTypes".replace("{appId}",e.appId.toString());return Object(l.actionBuilder)("GET",a).queryParams({}).config({rules:[new Z.ValidateRule(t,"unknown",200),new Z.ValidateRule(n.__Empty,"__Empty",401),new Z.ValidateRule(n.__Empty,"__Empty",403)]}).build()}}(_||(_=e.InternalResourceGetEventTypes||(e.InternalResourceGetEventTypes={}))),function(e){var t=ee.a(n.BehaviorGroup);e.actionCreator=function(){return Object(l.actionBuilder)("GET","./behaviorGroups/default").queryParams({}).config({rules:[new Z.ValidateRule(t,"unknown",200),new Z.ValidateRule(n.__Empty,"__Empty",401),new Z.ValidateRule(n.__Empty,"__Empty",403)]}).build()}}(h||(h=e.InternalResourceGetDefaultBehaviorGroups||(e.InternalResourceGetDefaultBehaviorGroups={}))),(f||(f=e.InternalResourceCreateDefaultBehaviorGroup||(e.InternalResourceCreateDefaultBehaviorGroup={}))).actionCreator=function(e){return Object(l.actionBuilder)("POST","./behaviorGroups/default").queryParams({}).data(e.body).config({rules:[new Z.ValidateRule(n.BehaviorGroup,"BehaviorGroup",200),new Z.ValidateRule(n.__Empty,"__Empty",401),new Z.ValidateRule(n.__Empty,"__Empty",403)]}).build()},function(e){ee.a(n.RequestDefaultBehaviorGroupPropertyList);var t=ee.h();e.actionCreator=function(e){var a="./behaviorGroups/default/{behaviorGroupId}/actions".replace("{behaviorGroupId}",e.behaviorGroupId.toString());return Object(l.actionBuilder)("PUT",a).queryParams({}).data(e.body).config({rules:[new Z.ValidateRule(t,"unknown",200),new Z.ValidateRule(n.__Empty,"__Empty",401),new Z.ValidateRule(n.__Empty,"__Empty",403)]}).build()}}(O||(O=e.InternalResourceUpdateDefaultBehaviorGroupActions||(e.InternalResourceUpdateDefaultBehaviorGroupActions={}))),function(e){var t=ee.h();e.actionCreator=function(e){var a="./behaviorGroups/default/{behaviorGroupId}/eventType/{eventTypeId}".replace("{behaviorGroupId}",e.behaviorGroupId.toString()).replace("{eventTypeId}",e.eventTypeId.toString());return Object(l.actionBuilder)("PUT",a).queryParams({}).config({rules:[new Z.ValidateRule(t,"unknown",200),new Z.ValidateRule(n.__Empty,"__Empty",401),new Z.ValidateRule(n.__Empty,"__Empty",403)]}).build()}}(E||(E=e.InternalResourceLinkDefaultBehaviorToEventType||(e.InternalResourceLinkDefaultBehaviorToEventType={}))),function(e){var t=ee.h();e.actionCreator=function(e){var a="./behaviorGroups/default/{behaviorGroupId}/eventType/{eventTypeId}".replace("{behaviorGroupId}",e.behaviorGroupId.toString()).replace("{eventTypeId}",e.eventTypeId.toString());return Object(l.actionBuilder)("DELETE",a).queryParams({}).config({rules:[new Z.ValidateRule(t,"unknown",200),new Z.ValidateRule(n.__Empty,"__Empty",401),new Z.ValidateRule(n.__Empty,"__Empty",403)]}).build()}}(g||(g=e.InternalResourceUnlinkDefaultBehaviorToEventType||(e.InternalResourceUnlinkDefaultBehaviorToEventType={}))),function(e){var t=ee.b();e.actionCreator=function(e){var a="./behaviorGroups/default/{id}".replace("{id}",e.id.toString());return Object(l.actionBuilder)("PUT",a).queryParams({}).data(e.body).config({rules:[new Z.ValidateRule(t,"unknown",200),new Z.ValidateRule(n.__Empty,"__Empty",401),new Z.ValidateRule(n.__Empty,"__Empty",403)]}).build()}}(x||(x=e.InternalResourceUpdateDefaultBehaviorGroup||(e.InternalResourceUpdateDefaultBehaviorGroup={}))),function(e){var t=ee.b();e.actionCreator=function(e){var a="./behaviorGroups/default/{id}".replace("{id}",e.id.toString());return Object(l.actionBuilder)("DELETE",a).queryParams({}).config({rules:[new Z.ValidateRule(t,"unknown",200),new Z.ValidateRule(n.__Empty,"__Empty",401),new Z.ValidateRule(n.__Empty,"__Empty",403)]}).build()}}(R||(R=e.InternalResourceDeleteDefaultBehaviorGroup||(e.InternalResourceDeleteDefaultBehaviorGroup={}))),function(e){var t=ee.a(n.Bundle);e.actionCreator=function(){return Object(l.actionBuilder)("GET","./bundles").queryParams({}).config({rules:[new Z.ValidateRule(t,"unknown",200),new Z.ValidateRule(n.__Empty,"__Empty",401),new Z.ValidateRule(n.__Empty,"__Empty",403)]}).build()}}(T||(T=e.InternalResourceGetBundles||(e.InternalResourceGetBundles={}))),(w||(w=e.InternalResourceCreateBundle||(e.InternalResourceCreateBundle={}))).actionCreator=function(e){return Object(l.actionBuilder)("POST","./bundles").queryParams({}).data(e.body).config({rules:[new Z.ValidateRule(n.Bundle,"Bundle",200),new Z.ValidateRule(n.__Empty,"__Empty",401),new Z.ValidateRule(n.__Empty,"__Empty",403)]}).build()},(I||(I=e.InternalResourceGetBundle||(e.InternalResourceGetBundle={}))).actionCreator=function(e){var t="./bundles/{bundleId}".replace("{bundleId}",e.bundleId.toString());return Object(l.actionBuilder)("GET",t).queryParams({}).config({rules:[new Z.ValidateRule(n.Bundle,"Bundle",200),new Z.ValidateRule(n.__Empty,"__Empty",401),new Z.ValidateRule(n.__Empty,"__Empty",403)]}).build()},(V||(V=e.InternalResourceUpdateBundle||(e.InternalResourceUpdateBundle={}))).actionCreator=function(e){var t="./bundles/{bundleId}".replace("{bundleId}",e.bundleId.toString());return Object(l.actionBuilder)("PUT",t).queryParams({}).data(e.body).config({rules:[new Z.ValidateRule(n.__Empty,"__Empty",200),new Z.ValidateRule(n.__Empty,"__Empty",401),new Z.ValidateRule(n.__Empty,"__Empty",403)]}).build()},function(e){var t=ee.b();e.actionCreator=function(e){var a="./bundles/{bundleId}".replace("{bundleId}",e.bundleId.toString());return Object(l.actionBuilder)("DELETE",a).queryParams({}).config({rules:[new Z.ValidateRule(t,"unknown",200),new Z.ValidateRule(n.__Empty,"__Empty",401),new Z.ValidateRule(n.__Empty,"__Empty",403)]}).build()}}(C||(C=e.InternalResourceDeleteBundle||(e.InternalResourceDeleteBundle={}))),function(e){var t=ee.a(n.Application1);e.actionCreator=function(e){var a="./bundles/{bundleId}/applications".replace("{bundleId}",e.bundleId.toString());return Object(l.actionBuilder)("GET",a).queryParams({}).config({rules:[new Z.ValidateRule(t,"unknown",200),new Z.ValidateRule(n.__Empty,"__Empty",401),new Z.ValidateRule(n.__Empty,"__Empty",403)]}).build()}}(A||(A=e.InternalResourceGetApplications||(e.InternalResourceGetApplications={}))),(P||(P=e.InternalResourceCreateEventType||(e.InternalResourceCreateEventType={}))).actionCreator=function(e){return Object(l.actionBuilder)("POST","./eventTypes").queryParams({}).data(e.body).config({rules:[new Z.ValidateRule(n.EventType,"EventType",200),new Z.ValidateRule(n.__Empty,"__Empty",401),new Z.ValidateRule(n.__Empty,"__Empty",403)]}).build()},(B||(B=e.InternalResourceUpdateEventType||(e.InternalResourceUpdateEventType={}))).actionCreator=function(e){var t="./eventTypes/{eventTypeId}".replace("{eventTypeId}",e.eventTypeId.toString());return Object(l.actionBuilder)("PUT",t).queryParams({}).data(e.body).config({rules:[new Z.ValidateRule(n.__Empty,"__Empty",200),new Z.ValidateRule(n.__Empty,"__Empty",401),new Z.ValidateRule(n.__Empty,"__Empty",403)]}).build()},function(e){var t=ee.b();e.actionCreator=function(e){var a="./eventTypes/{eventTypeId}".replace("{eventTypeId}",e.eventTypeId.toString());return Object(l.actionBuilder)("DELETE",a).queryParams({}).config({rules:[new Z.ValidateRule(t,"unknown",200),new Z.ValidateRule(n.__Empty,"__Empty",401),new Z.ValidateRule(n.__Empty,"__Empty",403)]}).build()}}(N||(N=e.InternalResourceDeleteEventType||(e.InternalResourceDeleteEventType={}))),(k||(k=e.InternalResourceGetServerInfo||(e.InternalResourceGetServerInfo={}))).actionCreator=function(){return Object(l.actionBuilder)("GET","./serverInfo").queryParams({}).config({rules:[new Z.ValidateRule(n.ServerInfo,"ServerInfo",200),new Z.ValidateRule(n.__Empty,"__Empty",401),new Z.ValidateRule(n.__Empty,"__Empty",403)]}).build()},(S||(S=e.InternalResourceSetCurrentStatus||(e.InternalResourceSetCurrentStatus={}))).actionCreator=function(e){return Object(l.actionBuilder)("PUT","./status").queryParams({}).data(e.body).config({rules:[new Z.ValidateRule(n.__Empty,"__Empty",204),new Z.ValidateRule(n.__Empty,"__Empty",401),new Z.ValidateRule(n.__Empty,"__Empty",403)]}).build()},function(e){var t=ee.a(n.Template);e.actionCreator=function(){return Object(l.actionBuilder)("GET","./templates").queryParams({}).config({rules:[new Z.ValidateRule(t,"unknown",200),new Z.ValidateRule(n.__Empty,"__Empty",401),new Z.ValidateRule(n.__Empty,"__Empty",403)]}).build()}}(G||(G=e.TemplateResourceGetAllTemplates||(e.TemplateResourceGetAllTemplates={}))),(D||(D=e.TemplateResourceCreateTemplate||(e.TemplateResourceCreateTemplate={}))).actionCreator=function(e){return Object(l.actionBuilder)("POST","./templates").queryParams({}).data(e.body).config({rules:[new Z.ValidateRule(n.Template,"Template",200),new Z.ValidateRule(n.__Empty,"__Empty",401),new Z.ValidateRule(n.__Empty,"__Empty",403)]}).build()},function(e){var t=ee.a(n.AggregationEmailTemplate);e.actionCreator=function(){return Object(l.actionBuilder)("GET","./templates/email/aggregation").queryParams({}).config({rules:[new Z.ValidateRule(t,"unknown",200),new Z.ValidateRule(n.__Empty,"__Empty",401),new Z.ValidateRule(n.__Empty,"__Empty",403)]}).build()}}(q||(q=e.TemplateResourceGetAllAggregationEmailTemplates||(e.TemplateResourceGetAllAggregationEmailTemplates={}))),(L||(L=e.TemplateResourceCreateAggregationEmailTemplate||(e.TemplateResourceCreateAggregationEmailTemplate={}))).actionCreator=function(e){return Object(l.actionBuilder)("POST","./templates/email/aggregation").queryParams({}).data(e.body).config({rules:[new Z.ValidateRule(n.AggregationEmailTemplate,"AggregationEmailTemplate",200),new Z.ValidateRule(n.__Empty,"__Empty",401),new Z.ValidateRule(n.__Empty,"__Empty",403)]}).build()},function(e){var t=ee.a(n.AggregationEmailTemplate);e.actionCreator=function(e){var a="./templates/email/aggregation/application/{appId}".replace("{appId}",e.appId.toString());return Object(l.actionBuilder)("GET",a).queryParams({}).config({rules:[new Z.ValidateRule(t,"unknown",200),new Z.ValidateRule(n.__Empty,"__Empty",401),new Z.ValidateRule(n.__Empty,"__Empty",403)]}).build()}}(M||(M=e.TemplateResourceGetAggregationEmailTemplatesByApplication||(e.TemplateResourceGetAggregationEmailTemplatesByApplication={}))),(U||(U=e.TemplateResourceGetAggregationemailTemplate||(e.TemplateResourceGetAggregationemailTemplate={}))).actionCreator=function(e){var t="./templates/email/aggregation/{templateId}".replace("{templateId}",e.templateId.toString());return Object(l.actionBuilder)("GET",t).queryParams({}).config({rules:[new Z.ValidateRule(n.AggregationEmailTemplate,"AggregationEmailTemplate",200),new Z.ValidateRule(n.__Empty,"__Empty",401),new Z.ValidateRule(n.__Empty,"__Empty",403)]}).build()},(F||(F=e.TemplateResourceUpdateAggregationEmailTemplate||(e.TemplateResourceUpdateAggregationEmailTemplate={}))).actionCreator=function(e){var t="./templates/email/aggregation/{templateId}".replace("{templateId}",e.templateId.toString());return Object(l.actionBuilder)("PUT",t).queryParams({}).data(e.body).config({rules:[new Z.ValidateRule(n.__Empty,"__Empty",200),new Z.ValidateRule(n.__Empty,"__Empty",401),new Z.ValidateRule(n.__Empty,"__Empty",403)]}).build()},function(e){var t=ee.b();e.actionCreator=function(e){var a="./templates/email/aggregation/{templateId}".replace("{templateId}",e.templateId.toString());return Object(l.actionBuilder)("DELETE",a).queryParams({}).config({rules:[new Z.ValidateRule(t,"unknown",200),new Z.ValidateRule(n.__Empty,"__Empty",401),new Z.ValidateRule(n.__Empty,"__Empty",403)]}).build()}}(H||(H=e.TemplateResourceDeleteAggregationEmailTemplate||(e.TemplateResourceDeleteAggregationEmailTemplate={}))),function(e){var t=ee.a(n.InstantEmailTemplate);e.actionCreator=function(e){var a={};return void 0!==e.applicationId&&(a.applicationId=e.applicationId),Object(l.actionBuilder)("GET","./templates/email/instant").queryParams(a).config({rules:[new Z.ValidateRule(t,"unknown",200),new Z.ValidateRule(n.__Empty,"__Empty",401),new Z.ValidateRule(n.__Empty,"__Empty",403)]}).build()}}(z||(z=e.TemplateResourceGetAllInstantEmailTemplates||(e.TemplateResourceGetAllInstantEmailTemplates={}))),(Q||(Q=e.TemplateResourceCreateInstantEmailTemplate||(e.TemplateResourceCreateInstantEmailTemplate={}))).actionCreator=function(e){return Object(l.actionBuilder)("POST","./templates/email/instant").queryParams({}).data(e.body).config({rules:[new Z.ValidateRule(n.InstantEmailTemplate,"InstantEmailTemplate",200),new Z.ValidateRule(n.__Empty,"__Empty",401),new Z.ValidateRule(n.__Empty,"__Empty",403)]}).build()},function(e){var t=ee.h();e.actionCreator=function(e){var a="./templates/email/instant/eventType/{eventTypeId}".replace("{eventTypeId}",e.eventTypeId.toString());return Object(l.actionBuilder)("GET",a).queryParams({}).config({rules:[new Z.ValidateRule(n.InstantEmailTemplate,"InstantEmailTemplate",200),new Z.ValidateRule(n.__Empty,"__Empty",401),new Z.ValidateRule(n.__Empty,"__Empty",403),new Z.ValidateRule(t,"unknown",404)]}).build()}}(J||(J=e.TemplateResourceGetInstantEmailTemplateByEventType||(e.TemplateResourceGetInstantEmailTemplateByEventType={}))),(W||(W=e.TemplateResourceGetInstantEmailTemplate||(e.TemplateResourceGetInstantEmailTemplate={}))).actionCreator=function(e){var t="./templates/email/instant/{templateId}".replace("{templateId}",e.templateId.toString());return Object(l.actionBuilder)("GET",t).queryParams({}).config({rules:[new Z.ValidateRule(n.InstantEmailTemplate,"InstantEmailTemplate",200),new Z.ValidateRule(n.__Empty,"__Empty",401),new Z.ValidateRule(n.__Empty,"__Empty",403)]}).build()},(Y||(Y=e.TemplateResourceUpdateInstantEmailTemplate||(e.TemplateResourceUpdateInstantEmailTemplate={}))).actionCreator=function(e){var t="./templates/email/instant/{templateId}".replace("{templateId}",e.templateId.toString());return Object(l.actionBuilder)("PUT",t).queryParams({}).data(e.body).config({rules:[new Z.ValidateRule(n.__Empty,"__Empty",200),new Z.ValidateRule(n.__Empty,"__Empty",401),new Z.ValidateRule(n.__Empty,"__Empty",403)]}).build()},function(e){var t=ee.b();e.actionCreator=function(e){var a="./templates/email/instant/{templateId}".replace("{templateId}",e.templateId.toString());return Object(l.actionBuilder)("DELETE",a).queryParams({}).config({rules:[new Z.ValidateRule(t,"unknown",200),new Z.ValidateRule(n.__Empty,"__Empty",401),new Z.ValidateRule(n.__Empty,"__Empty",403)]}).build()}}($||($=e.TemplateResourceDeleteInstantEmailTemplate||(e.TemplateResourceDeleteInstantEmailTemplate={}))),function(e){var t=ee.f({body:ee.h().optional().nullable(),subject:ee.h().optional().nullable()}).nonstrict(),a=ee.f({message:ee.h().optional().nullable()}).nonstrict();e.actionCreator=function(e){return Object(l.actionBuilder)("POST","./templates/email/render").queryParams({}).data(e.body).config({rules:[new Z.ValidateRule(t,"unknown",200),new Z.ValidateRule(a,"unknown",400),new Z.ValidateRule(n.__Empty,"__Empty",401),new Z.ValidateRule(n.__Empty,"__Empty",403)]}).build()}}(K||(K=e.TemplateResourceRenderEmailTemplate||(e.TemplateResourceRenderEmailTemplate={}))),(X||(X=e.TemplateResourceGetTemplate||(e.TemplateResourceGetTemplate={}))).actionCreator=function(e){var t="./templates/{templateId}".replace("{templateId}",e.templateId.toString());return Object(l.actionBuilder)("GET",t).queryParams({}).config({rules:[new Z.ValidateRule(n.Template,"Template",200),new Z.ValidateRule(n.__Empty,"__Empty",401),new Z.ValidateRule(n.__Empty,"__Empty",403)]}).build()},(te||(te=e.TemplateResourceUpdateTemplate||(e.TemplateResourceUpdateTemplate={}))).actionCreator=function(e){var t="./templates/{templateId}".replace("{templateId}",e.templateId.toString());return Object(l.actionBuilder)("PUT",t).queryParams({}).data(e.body).config({rules:[new Z.ValidateRule(n.__Empty,"__Empty",200),new Z.ValidateRule(n.__Empty,"__Empty",401),new Z.ValidateRule(n.__Empty,"__Empty",403)]}).build()},function(e){var t=ee.b();e.actionCreator=function(e){var a="./templates/{templateId}".replace("{templateId}",e.templateId.toString());return Object(l.actionBuilder)("DELETE",a).queryParams({}).config({rules:[new Z.ValidateRule(t,"unknown",200),new Z.ValidateRule(n.__Empty,"__Empty",401),new Z.ValidateRule(n.__Empty,"__Empty",403)]}).build()}}(ae||(ae=e.TemplateResourceDeleteTemplate||(e.TemplateResourceDeleteTemplate={}))),ie=ne||(ne=e.ValidationResourceValidate||(e.ValidationResourceValidate={})),ee.h(),ee.h(),ee.h(),ie.actionCreator=function(e){var t={};return void 0!==e.application&&(t.application=e.application),void 0!==e.bundle&&(t.bundle=e.bundle),void 0!==e.eventType&&(t.eventType=e.eventType),Object(l.actionBuilder)("GET","./validation/baet").queryParams(t).config({rules:[new Z.ValidateRule(n.__Empty,"__Empty",200)]}).build()},re=le||(le=e.ValidationResourceValidateMessage||(e.ValidationResourceValidateMessage={})),ee.h(),re.actionCreator=function(e){return Object(l.actionBuilder)("POST","./validation/message").queryParams({}).data(e.body).config({rules:[new Z.ValidateRule(n.__Empty,"__Empty",200),new Z.ValidateRule(n.MessageValidationResponse,"MessageValidationResponse",400)]}).build()},function(e){var t=ee.h();e.actionCreator=function(){return Object(l.actionBuilder)("GET","./version").queryParams({}).config({rules:[new Z.ValidateRule(t,"unknown",200),new Z.ValidateRule(n.__Empty,"__Empty",401),new Z.ValidateRule(n.__Empty,"__Empty",403)]}).build()}}(oe||(oe=e.InternalResourceGetVersion||(e.InternalResourceGetVersion={})))}(i||(i={}));var te=Object(Z.validationResponseTransformer)((function(e){if(200===e.status){var t=e.value.map((function(e){return{id:e.id,name:e.name,description:e.description,data:e.data}}));return Object(Z.validatedResponse)("emailTemplates",200,t,e.errors)}return e})),ae=a(712),ne=a(678),ie=a(679),le=function(e){return Object(T.jsx)(o.a.Fragment,{children:Object(T.jsx)(ae.a,{variant:ae.b.medium,title:" Email Template for ".concat(e.applicationName),isOpen:e.showModal,onClose:e.onClose,children:Object(T.jsxs)(ne.a,{isHorizontal:!0,children:["Viewing modal for existing templates",Object(T.jsx)(ie.a,{children:Object(T.jsx)(F.a,{variant:"primary",type:"reset",onClick:e.onClose,children:"Close"})})]})})})},re=function(e){var t,a=k().hasPermission,n=function(){var e=Object(u.useQuery)(i.TemplateResourceGetAllTemplates.actionCreator()),t=Object(r.useMemo)((function(){var t=e.payload;if(t)return te(t)}),[e.payload]);return Object(r.useMemo)((function(){return Object(B.a)(Object(B.a)({},e),{},{payload:t})}),[e,t])}(),l=r.useState(!1),o=Object(p.a)(l,2),c=o[0],s=o[1],m=function(){s(!0)};return n.loading?Object(T.jsx)(v.a,{}):200!==(null===(t=n.payload)||void 0===t?void 0:t.status)?Object(T.jsxs)("span",{children:["Error while loading templates: ",n.errorObject.toString()]}):Object(T.jsx)(r.Fragment,{children:Object(T.jsxs)(y.a,{children:[Object(T.jsx)(x.a,{headingLevel:"h1",children:Object(T.jsx)(A.a,{children:Object(T.jsxs)(P.a,{target:"#",children:["Email Templates for ",e.application.displayName]})})}),Object(T.jsxs)(J.a,{"aria-label":"Email Template table",children:[Object(T.jsxs)(W.a,{children:[Object(T.jsx)(L.a,{children:Object(T.jsx)(M.a,{children:Object(T.jsxs)(U.a,{children:[Object(T.jsx)(F.a,{variant:"primary",isDisabled:!a(e.application.id),component:function(e){return Object(T.jsx)(d.b,Object(B.a)(Object(B.a)({},e),{},{to:_t.emailTemplates}))},children:"Create Email Template"}),Object(T.jsx)(le,{showModal:c,applicationName:e.application.displayName,onClose:function(){s(!1)}})]})})}),Object(T.jsx)(Y.a,{children:["Email Templates"].map((function(e,t){return Object(T.jsx)($.a,{children:e},t)}))})]}),Object(T.jsx)(K.a,{children:n.payload.value.map((function(e){return Object(T.jsxs)(Y.a,{children:[Object(T.jsx)(X.a,{children:e.name}),Object(T.jsx)(X.a,{children:Object(T.jsxs)(F.a,{className:"view",type:"button",variant:"plain",onClick:m,children:[" ",Object(T.jsx)(H.a,{})," "]})}),Object(T.jsx)(X.a,{children:Object(T.jsxs)(F.a,{className:"edit",type:"button",variant:"plain",isDisabled:!0,children:[" ",Object(T.jsx)(z.a,{})," "]})}),Object(T.jsx)(X.a,{children:Object(T.jsxs)(F.a,{className:"delete",type:"button",variant:"plain",isDisabled:!0,children:[Object(T.jsx)(Q.a,{})," "]})})]},e.id)}))})]})]})})},oe=a(26),ce=a(718),se=a(686),ue=a(719),de=a(687),pe=a(720),me=function(e){var t,a=o.a.useState(null!==(t=e.initialEventType)&&void 0!==t?t:{}),n=Object(p.a)(a,2),i=n[0],l=n[1],r=function(e,t){var a=t.target;l((function(e){return Object(B.a)(Object(B.a)({},e),{},Object(oe.a)({},a.name,a.value))}))},c=o.a.useCallback((function(){e.onSubmit(i)}),[i,e]);return o.a.useEffect((function(){var t;l(null!==(t=e.initialEventType)&&void 0!==t?t:{})}),[e.initialEventType]),Object(T.jsx)(o.a.Fragment,{children:Object(T.jsx)(ae.a,{variant:ae.b.medium,title:"".concat(e.isEdit?"Update":"Create"," Event Type for ").concat(e.applicationName),isOpen:e.showModal,onClose:e.onClose,children:Object(T.jsxs)(ne.a,{isHorizontal:!0,children:[Object(T.jsx)(ce.a,{label:"Name",fieldId:"name",isRequired:!0,helperText:e.isEdit?Object(T.jsx)(se.a,{children:Object(T.jsx)(ue.a,{variant:"warning",hasIcon:!0,children:"If this field is modified it may affect exisiting behavior."})}):"This is a short name, only composed of a-z 0-9 and - characters.",children:Object(T.jsx)(de.a,{type:"text",value:i.name,onChange:r,id:"name",name:"name"})}),Object(T.jsx)(ce.a,{label:"Display name",fieldId:"display-name",isRequired:!0,helperText:"This is the name you want to display on the UI",children:Object(T.jsx)(de.a,{type:"text",value:i.displayName,onChange:r,id:"display-name",name:"displayName"})}),Object(T.jsx)(ce.a,{label:"Description",fieldId:"description",helperText:"Optional short description that appears in the UI to help admin decide how to notify users.",children:Object(T.jsx)(pe.a,{type:"text",value:i.description,onChange:r,id:"description",name:"description"})}),Object(T.jsxs)(ie.a,{children:[Object(T.jsx)(F.a,{variant:"primary",type:"submit",isLoading:e.isLoading,isDisabled:e.isLoading,onClick:c,children:e.isEdit?"Update":"Submit"}),Object(T.jsx)(F.a,{variant:"link",type:"reset",onClick:e.onClose,children:"Cancel"})]})]})})})},be=function(e){var t=o.a.useState(!0),a=Object(p.a)(t,2),n=a[0],i=a[1],l=o.a.useCallback(Object(C.a)(V.a.mark((function t(){var a;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.onDelete,t.next=3,a();case 3:t.sent?e.onClose():alert("Could not delete event type, please try again.");case 5:case"end":return t.stop()}}),t)}))),[e]);return Object(T.jsx)(o.a.Fragment,{children:Object(T.jsxs)(ae.a,{variant:ae.b.small,titleIconVariant:"warning",isOpen:e.isOpen,onClose:e.onClose,title:"Permanently delete ".concat(e.eventTypeName),children:[Object(T.jsx)("b",{children:e.eventTypeName})," ","from  ".concat(e.applicationName,"/").concat(e.bundleName?e.bundleName:Object(T.jsx)(v.a,{})," will be deleted. \n                        If an application is currently sending this event, it will no longer be processed."),Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),"Type ",Object(T.jsx)("b",{children:e.eventTypeName})," to confirm:",Object(T.jsx)("br",{}),Object(T.jsx)(de.a,{type:"text",onChange:function(t,a){var n=a.target;return n.value!==e.eventTypeName?i(!0):n.value===e.eventTypeName?i(!1):void 0},id:"name",name:"name",isRequired:!0}),Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsxs)(ie.a,{children:[Object(T.jsx)(F.a,{variant:"danger",type:"button",isDisabled:n,onClick:l,children:"Delete"}),Object(T.jsx)(F.a,{variant:"link",type:"button",onClick:e.onClose,children:"Cancel"})]})]})})},je=a(692),ye=a(693),ve=a(694),_e=a(695),he=a(696),fe=a(422),Oe=a(233),Ee=a(688),ge=a(689),xe=a(690),Re=a(691),Te=function(e){return Object(T.jsxs)(Ee.a,{isHorizontal:!0,children:[Object(T.jsxs)(ge.a,{children:[Object(T.jsx)(xe.a,{children:"Event type id"}),Object(T.jsx)(Re.a,{children:e.eventType.id})]}),Object(T.jsxs)(ge.a,{children:[Object(T.jsx)(xe.a,{children:"Description"}),Object(T.jsx)(Re.a,{children:e.eventType.description})]})]})},we=function(e){var t=e.eventType;return t.instantEmail.isLoading?Object(T.jsx)(v.a,{}):Object(T.jsx)(T.Fragment,{children:t.instantEmail.id?"Template found":"No template"})},Ie=function(e){return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(L.a,{children:Object(T.jsx)(M.a,{children:Object(T.jsx)(U.a,{children:e.createEventTypeButton})})}),Object(T.jsxs)(J.a,{"aria-label":"Event types table",children:[Object(T.jsxs)(W.a,{children:[Object(T.jsx)($.a,{}),Object(T.jsx)($.a,{children:"Event Type"}),Object(T.jsx)($.a,{children:"Name"}),Object(T.jsx)($.a,{children:"Instant email"}),Object(T.jsx)($.a,{})]}),Object(T.jsx)(K.a,{children:e.children})]})]})},Ve=function(e){return Object(T.jsxs)(T.Fragment,{children:[0===e.eventTypes.length&&Object(T.jsx)(Y.a,{children:Object(T.jsx)(X.a,{colSpan:5,children:Object(T.jsxs)(je.a,{children:[Object(T.jsx)(ye.a,{children:"There are no event types found for this application"}),e.createEventTypeButton]})})}),e.eventTypes.map((function(t,a){var n,i;return Object(T.jsxs)(r.Fragment,{children:[Object(T.jsxs)(Y.a,{children:[Object(T.jsx)(X.a,{expand:{rowIndex:a,isExpanded:!!(null===(n=e.tableData[t.id])||void 0===n?void 0:n.isExpanded),onToggle:e.onExpandToggle}}),Object(T.jsx)(X.a,{children:t.displayName}),Object(T.jsx)(X.a,{children:t.name}),Object(T.jsx)(X.a,{children:Object(T.jsx)(we,{eventType:t})}),Object(T.jsx)(X.a,{children:Object(T.jsxs)(ve.a,{isIconList:!0,children:[Object(T.jsx)(_e.a,{children:Object(T.jsx)(F.a,{className:"edit",variant:F.b.plain,isDisabled:!e.hasPermissions,onClick:function(){return e.onEditEventType(t)},children:Object(T.jsx)(z.a,{})})}),Object(T.jsx)(_e.a,{children:Object(T.jsx)(F.a,{className:"delete",variant:F.b.plain,isDisabled:!e.hasPermissions,onClick:function(){return e.onDeleteEventTypeModal(t)},children:Object(T.jsx)(Q.a,{})})})]})})]}),Object(T.jsxs)(Y.a,{isExpanded:null===(i=e.tableData[t.id])||void 0===i?void 0:i.isExpanded,children:[Object(T.jsx)(X.a,{}),Object(T.jsx)(X.a,{colSpan:4,children:Object(T.jsx)(fe.a,{children:Object(T.jsx)(Te,{eventType:t})})})]},"".concat(t.id,"-expanded-row"))]},t.id)}))]})},Ce=function(){return Object(T.jsx)(T.Fragment,{children:Array.from(new Array(5)).map((function(e,t){return Object(T.jsx)(Y.a,{children:Array.from(new Array(5)).map((function(e,a){return Object(T.jsx)(X.a,{children:Object(T.jsx)(he.a,{})},"skeleton-cell-".concat(t,"-").concat(a))}))},"skeleton-row-".concat(t))}))})},Ae=function(e){var t=e.eventTypes,a=r.useState({}),n=Object(p.a)(a,2),i=n[0],l=n[1],o=Object(T.jsx)(F.a,{variant:F.b.primary,isDisabled:!e.hasPermissions,onClick:e.onCreateEventType,children:"Create Event Type"});Object(r.useEffect)((function(){l((function(e){return t?Object.fromEntries(t.map((function(t){var a=Object(B.a)({isExpanded:!1},e[t.id]);return[t.id,a]}))):e}))}),[t]);var c=r.useCallback((function(e,a,n){l(Object(Oe.a)((function(e){var i=t?t[a]:void 0;if(i){var l=e[i.id];l&&(l.isExpanded=n)}})))}),[t]);return Object(T.jsx)(Ie,Object(B.a)(Object(B.a)({},e),{},{createEventTypeButton:o,children:t?Object(T.jsx)(Ve,Object(B.a)(Object(B.a)({},e),{},{eventTypes:t,onExpandToggle:c,tableData:i,createEventTypeButton:o})):Object(T.jsx)(Ce,Object(B.a)({},e))}))},Pe=a(425),Be=["href"],Ne=function(e){var t=e.href,a=Object(Pe.a)(e,Be);return Object(T.jsx)(d.b,Object(B.a)(Object(B.a)({to:t},a),{},{children:e.children}))},ke=function(e){return Object(T.jsx)(P.a,Object(B.a)(Object(B.a)({},e),{},{component:Ne,children:e.children}))},Se=Object(Z.validationResponseTransformer)((function(e){if(200===e.status){var t=e.value.map((function(e){var t;return{id:null!==(t=e.id)&&void 0!==t?t:"",application:e.application,applicationId:e.application_id,body_template:e.body_template,body_template_id:e.body_template_id,subject_template:e.subject_template,subject_template_id:e.subject_template_id}}));return Object(Z.validatedResponse)("AggregationEmailTemplates",200,t,e.errors)}return e})),Ge=function(e){return void 0===e.id?i.InternalResourceCreateEventType.actionCreator({body:{id:e.id,application_id:e.applicationId,description:e.description,display_name:e.displayName,name:e.name}}):i.InternalResourceUpdateEventType.actionCreator({eventTypeId:e.id,body:{id:e.id,application_id:e.applicationId,description:e.description,display_name:e.displayName,name:e.name}})},De=function(e){return i.InternalResourceDeleteEventType.actionCreator({eventTypeId:e})},qe=Object(Z.validationResponseTransformer)((function(e){if(200===e.status){var t,a={id:null!==(t=e.value.id)&&void 0!==t?t:"",displayName:e.value.display_name,name:e.value.name,bundleId:e.value.bundle_id};return Object(Z.validatedResponse)("Application",200,a,e.errors)}return e})),Le=function(e){return i.InternalResourceGetBundle.actionCreator({bundleId:e})},Me=Object(Z.validationResponseTransformer)((function(e){if(200===e.status){var t=e.value.map((function(e){var t,a;return{id:null!==(t=e.id)&&void 0!==t?t:"",name:e.name,displayName:e.display_name,description:null!==(a=e.description)&&void 0!==a?a:"",applicationId:e.application_id}}));return Object(Z.validatedResponse)("EventTypes",200,t,e.errors)}return e})),Ue=function(e){var t=Object(u.useQuery)(i.InternalResourceGetEventTypes.actionCreator({appId:e})),a=Object(r.useMemo)((function(){var e=t.payload;if(e)return Me(e)}),[t.payload]);return Object(r.useMemo)((function(){return Object(B.a)(Object(B.a)({},t),{},{payload:a})}),[t,a])},Fe=a(697),He=a(698),ze=function(e){var t=k(),a=o.a.useState(Object(B.a)({},e.initialApplication)),n=Object(p.a)(a,2),i=n[0],l=n[1],r=function(e,t){var a=t.target;l((function(e){return Object(B.a)(Object(B.a)({},e),{},Object(oe.a)({},a.name,a.value))}))},c=o.a.useCallback((function(){e.onSubmit(i)}),[i,e]);return o.a.useEffect((function(){void 0===i.ownerRole&&t.roles.length>0&&l((function(e){return Object(B.a)(Object(B.a)({},e),{},{ownerRole:t.roles[0]})}))}),[t.roles,i.ownerRole]),Object(T.jsx)(o.a.Fragment,{children:Object(T.jsx)(ae.a,{variant:ae.b.medium,title:"".concat(e.isEdit?"Update ".concat(e.applicationName):"Create Application"," for ").concat(e.bundleName),isOpen:e.showModal,onClose:e.onClose,children:Object(T.jsxs)(ne.a,{isHorizontal:!0,children:[Object(T.jsx)(ce.a,{label:"Name",fieldId:"name",isRequired:!0,helperText:e.isEdit?Object(T.jsx)(se.a,{children:Object(T.jsx)(ue.a,{variant:"warning",hasIcon:!0,children:"If this field is modified it may affect exisiting behavior."})}):"This is a short name, only composed of a-z 0-9 and - characters.",children:Object(T.jsx)(de.a,{type:"text",value:i.name,onChange:r,id:"name",name:"name"})}),Object(T.jsx)(ce.a,{label:"Display name",fieldId:"display-name",isRequired:!0,helperText:"This is the name you want to display on the UI",children:Object(T.jsx)(de.a,{type:"text",value:i.displayName,onChange:r,id:"display-name",name:"displayName"})}),!e.isEdit&&Object(T.jsx)(ce.a,{fieldId:"role-name",label:"Role admin",isRequired:!0,helperText:"Role of users who will manage the application",children:t.isAdmin?Object(T.jsx)(de.a,{type:"text",onChange:r,value:i.ownerRole,id:"owner-role",name:"ownerRole"}):Object(T.jsx)(Fe.a,{value:i.ownerRole,onChange:r,id:"owner-role",name:"ownerRole",children:t.roles.map((function(e){return Object(T.jsx)(He.a,{label:e,value:e},e)}))})}),Object(T.jsxs)(ie.a,{children:[Object(T.jsx)(F.a,{variant:"primary",type:"submit",isLoading:e.isLoading,isDisabled:e.isLoading,onClick:c,children:e.isEdit?"Update":"Submit"}),Object(T.jsx)(F.a,{variant:"link",type:"reset",onClick:e.onClose,children:"Cancel"})]})]})})})},Qe=function(e){var t=o.a.useState(!0),a=Object(p.a)(t,2),n=a[0],i=a[1],l=o.a.useCallback(Object(C.a)(V.a.mark((function t(){var a;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.onDelete,t.next=3,a();case 3:t.sent?e.onClose():alert("Could not delete application, please try again.");case 5:case"end":return t.stop()}}),t)}))),[e]);return Object(T.jsx)(o.a.Fragment,{children:Object(T.jsxs)(ae.a,{variant:ae.b.small,titleIconVariant:"warning",isOpen:e.isOpen,onClose:e.onClose,title:"Permanently delete ".concat(e.applicationName),children:[Object(T.jsx)("b",{children:e.applicationName})," ","from ".concat(e.bundleName?e.bundleName:Object(T.jsx)(v.a,{})," will be deleted. \n                        By deleting this application all associated event types will be deleted and no longer processed. "),Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),"Type ",Object(T.jsx)("b",{children:e.applicationName})," to confirm:",Object(T.jsx)("br",{}),Object(T.jsx)(de.a,{type:"text",onChange:function(t,a){var n=a.target;return n.value!==e.applicationName?i(!0):n.value===e.applicationName?i(!1):void 0},id:"name",name:"name",isRequired:!0}),Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsxs)(ie.a,{children:[Object(T.jsx)(F.a,{variant:"danger",type:"button",isDisabled:n,onClick:l,children:"Delete"}),Object(T.jsx)(F.a,{variant:"link",type:"button",onClick:e.onClose,children:"Cancel"})]})]})})},Je=a(721),We=a(423),Ye=function(e){var t,a=Ue(e.appId);return a.loading?Object(T.jsx)(v.a,{}):200!==(null===(t=a.payload)||void 0===t?void 0:t.status)?Object(T.jsxs)("span",{children:["Error while loading eventtypes: ",a.errorObject.toString()]}):Object(T.jsxs)(r.Fragment,{children:[Object(T.jsx)(Je.a,{children:0===a.payload.value.length?"No event types":""}),Object(T.jsx)(Je.a,{children:a.payload.value.map((function(e){return Object(T.jsx)(We.a,{isReadOnly:!0,children:e.displayName},e.id)}))})]})},$e=function(e){return void 0===e.id?i.InternalResourceCreateApplication.actionCreator({body:{bundle_id:e.bundleId,display_name:e.displayName,name:e.name,owner_role:e.ownerRole}}):i.InternalResourceUpdateApplication.actionCreator({appId:e.id,body:{id:e.id,bundle_id:e.bundleId,display_name:e.displayName,name:e.name}})},Ke=function(e){return i.InternalResourceDeleteApplication.actionCreator({appId:e})},Xe=Object(Z.validationResponseTransformer)((function(e){if(200===e.status){var t=e.value.map((function(e){var t;return{id:null!==(t=e.id)&&void 0!==t?t:"",displayName:e.display_name,bundleId:e.bundle_id,name:e.name}}));return Object(Z.validatedResponse)("Applications",200,t,e.errors)}return e})),Ze=Object(Z.validationResponseTransformer)((function(e){if(200===e.status){var t,a={id:null!==(t=e.value.id)&&void 0!==t?t:"",displayName:e.value.display_name,applications:[]};return Object(Z.validatedResponse)("Bundle",200,a,e.errors)}return e})),et=a(699),tt=a(700),at="\nImportant email to {user.firstName} from MyCoolApp!\n".trimLeft(),nt='\n<div>Hello {user.firstName} {user.lastName},</div>\n<div>We have some important news for you, MyApp has a notification for you</div>\n<div>As a reminder, current user: {user.username}: is active? {user.isActive}; is admin? {user.isAdmin}</div>\n<div>\n    System with name <strong>{action.context.display_name}</strong> (<strong>{action.context.inventory_id}</strong>) \n    did a check in at {action.context.system_check_in.toUtcFormat()}. \n    It was about {action.context.system_check_in.toTimeAgo()}\n</div>\n<div>This is a loop:</div>\n{#if action.events.size() > 0}\n<ul>\n    {#each action.events}\n        <li>\n            <a href="http://google.com?q={it.payload.my_id}" target="_blank">{it.payload.my_name}</a>\n        </li>\n    {/each}\n</ul>\n<div>Have a nice day!</div>\n{/if}\n'.trimLeft(),it=JSON.stringify({bundle:"rhel",application:"policies",event_type:"policy-triggered",timestamp:"2021-08-05T16:21:14.243",account_id:"5758117",context:'{"inventory_id":"80f7e57d-a16a-4189-82af-1d68a747c8b3","system_check_in":"2021-08-05T16:21:12.953036","display_name":"cool display name"}',events:[{metadata:{},payload:'{"my_id":"3df53241-3e09-481b-a322-4892caaaaadc","my_name":"Red color"}'},{metadata:{},payload:'{"my_id":"6c5e8451-a40a-4bb7-ab9a-0cb10a4c577d","my_name":"Green color"}'},{metadata:{},payload:'{"my_id":"b4c6378a-c1fb-4d3e-8e9b-7e5bdfc09dd3","my_name":"Blue color"}'}]},null,2),lt=a(701),rt=a(702),ot=a(704),ct=a(705),st=a(250),ut=a(703),dt=JSON.stringify({},null,2),pt=function(e){var t=Object.keys(e).sort(),a=[];return t.forEach((function(t){e[t].forEach((function(e){return a.push(e)}))})),Object(T.jsx)(lt.a,{children:a.map((function(e,t){return Object(T.jsx)(rt.a,{children:e},t)}))})},mt=function(e){return i.TemplateResourceRenderEmailTemplate.actionCreator({body:{subject_template:e.subject,body_template:e.body,payload:e.payload}})},bt="\nImportant email to {user.firstName} from MyCoolApp!\n".trimLeft(),jt='\n<div>Hello {user.firstName} {user.lastName},</div>\n<div>We have some important news for you, MyApp has a notification for you</div>\n<div>As a reminder, current user: {user.username}: is active? {user.isActive}; is admin? {user.isAdmin}</div>\n<div>\n    System with name <strong>{action.context.display_name}</strong> (<strong>{action.context.inventory_id}</strong>) \n    did a check in at {action.context.system_check_in.toUtcFormat()}. \n    It was about {action.context.system_check_in.toTimeAgo()}\n</div>\n<div>This is a loop:</div>\n{#if action.events.size() > 0}\n<ul>\n    {#each action.events}\n        <li>\n            <a href="http://google.com?q={it.payload.my_id}" target="_blank">{it.payload.my_name}</a>\n        </li>\n    {/each}\n</ul>\n<div>Have a nice day!</div>\n{/if}\n'.trimLeft(),yt=JSON.stringify({bundle:"rhel",application:"policies",event_type:"policy-triggered",timestamp:"2021-08-05T16:21:14.243",account_id:"5758117",context:'{"inventory_id":"80f7e57d-a16a-4189-82af-1d68a747c8b3","system_check_in":"2021-08-05T16:21:12.953036","display_name":"cool display name"}',events:[{metadata:{},payload:'{"my_id":"3df53241-3e09-481b-a322-4892caaaaadc","my_name":"Red color"}'},{metadata:{},payload:'{"my_id":"6c5e8451-a40a-4bb7-ab9a-0cb10a4c577d","my_name":"Green color"}'},{metadata:{},payload:'{"my_id":"b4c6378a-c1fb-4d3e-8e9b-7e5bdfc09dd3","my_name":"Blue color"}'}]},null,2),vt=function(e){return e.isLoading?Object(T.jsx)(v.a,{}):e.succeeded?Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(ct.a,{children:Object(T.jsxs)("span",{children:[Object(T.jsx)("strong",{children:"Subject:"})," ",e.subject]})}),Object(T.jsx)(ct.a,{children:Object(T.jsx)("strong",{children:"Body:"})}),Object(T.jsx)(ct.a,{children:Object(T.jsx)("iframe",{width:"100%",srcDoc:e.body})})]}):Object(T.jsx)(ct.a,{children:Object(T.jsx)(se.a,{children:Object(T.jsx)(ue.a,{variant:"error",children:e.error})})})},_t={bundle:function(e){return"/bundle/".concat(e)},application:function(e){return"/application/".concat(e)},aggregation:function(){return"/aggregation"},email:function(){return"/email"},emailTemplates:function(){return"/emailTemplates"},messageValidator:function(){return"/utils/message-validator"}},ht=[{path:_t.aggregation(),component:function(){var e=r.useCallback((function(e,t){e.layout(),e.focus(),t.editor.getModels()[0].updateOptions({tabSize:5})}),[]),t=r.useCallback((function(e){}),[]),a=Object(r.useMemo)((function(){return[Object(T.jsx)(E.a,{icon:Object(T.jsx)(R.a,{}),toolTipText:"Test aggregation",onClick:function(){return console.log("testing")},isVisible:!0},"test")]}),[]);return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(y.a,{children:Object(T.jsx)(x.a,{headingLevel:"h1",children:"Aggregation templates"})}),Object(T.jsx)(y.a,{children:Object(T.jsx)(g.a,{isDownloadEnabled:!0,isUploadEnabled:!0,customControls:a,isLineNumbersVisible:!0,isLanguageLabelVisible:!0,isMinimapVisible:!1,language:g.b.javascript,onEditorDidMount:e,onChange:t,code:w,height:"300px"})})]})}},{path:_t.application(":applicationId"),component:function(){var e,t,a,n,l,o,c,s=k(),d=s.hasPermission,m=s.isAdmin,b=Object(O.g)().applicationId,j=function(e){var t=Object(r.useState)(),a=Object(p.a)(t,2),n=a[0],l=a[1],o=Ue(e),c=Object(u.useClient)().query;return Object(r.useEffect)((function(){l(void 0)}),[e]),Object(r.useEffect)((function(){var e;if(200===(null===(e=o.payload)||void 0===e?void 0:e.status)){var t=o.payload.value.map((function(e){return Object(B.a)(Object(B.a)({},e),{},{instantEmail:{isLoading:!0}})}));l(t),t.forEach((function(e){c(i.TemplateResourceGetInstantEmailTemplateByEventType.actionCreator({eventTypeId:e.id})).then((function(t){var a,n;if(200===(null===(a=t.payload)||void 0===a?void 0:a.status)||404===(null===(n=t.payload)||void 0===n?void 0:n.status)){var i=200===t.payload.status?t.payload.value.id:void 0;l(Object(Oe.a)((function(t){var a=Object(Oe.b)(t);if(t&&a){var n=a.findIndex((function(t){return t.id===e.id}));-1!==n&&(t[n].instantEmail={isLoading:!1,id:null===i?void 0:i})}})))}}))}))}}),[o.payload,o.loading,c]),{data:n,loading:o.loading,reload:o.query,error:o.errorObject}}(b),_=function(e){var t=Object(u.useQuery)(i.InternalResourceGetApplication.actionCreator({appId:e})),a=Object(r.useMemo)((function(){var e=t.payload;if(e)return qe(e)}),[t.payload]);return Object(r.useMemo)((function(){return Object(B.a)(Object(B.a)({},t),{},{payload:a})}),[t,a])}(b),h=Object(u.useMutation)(De),f=Object(u.useMutation)(Ge),E=function(e){var t=Object(u.useQuery)(i.TemplateResourceGetAggregationEmailTemplatesByApplication.actionCreator({appId:e})),a=Object(r.useMemo)((function(){var e=t.payload;if(e)return Se(e)}),[t.payload]);return Object(r.useMemo)((function(){return Object(B.a)(Object(B.a)({},t),{},{payload:a})}),[t,a])}(b),g=r.useState({}),R=Object(p.a)(g,2),w=R[0],I=R[1],N=r.useState(!1),S=Object(p.a)(N,2),G=S[0],D=S[1],L=r.useState(!1),M=Object(p.a)(L,2),U=M[0],F=M[1],H=r.useState(!1),z=Object(p.a)(H,2),Q=z[0],J=z[1],W=r.useMemo((function(){var e;if("Application"===(null===(e=_.payload)||void 0===e?void 0:e.type))return _.payload.value.bundleId}),[_.payload]),Y=Object(u.useParameterizedQuery)(Le);r.useEffect((function(){var e=Y.query;W&&e(W)}),[W,Y.query]);var $=r.useMemo((function(){var e;if(200===(null===(e=Y.payload)||void 0===e?void 0:e.status))return Y.payload.value}),[null===(e=Y.payload)||void 0===e?void 0:e.status,null===(t=Y.payload)||void 0===t?void 0:t.value]),K=Object(r.useMemo)((function(){var e;if(200===(null===(e=_.payload)||void 0===e?void 0:e.status))return _.payload.value}),[null===(a=_.payload)||void 0===a?void 0:a.status,null===(n=_.payload)||void 0===n?void 0:n.value]),X=Object(r.useMemo)((function(){var e;if(200===(null===(e=E.payload)||void 0===e?void 0:e.status))return E.payload.value}),[null===(l=E.payload)||void 0===l?void 0:l.status,null===(o=E.payload)||void 0===o?void 0:o.value]),Z=r.useCallback((function(e){var t,a,n;D(!1),(0,f.mutate)({id:e.id,displayName:null!==(t=e.displayName)&&void 0!==t?t:"",name:null!==(a=e.name)&&void 0!==a?a:"",description:null!==(n=e.description)&&void 0!==n?n:"",applicationId:b}).then(j.reload)}),[b,j.reload,f.mutate]),ee=r.useCallback(Object(C.a)(V.a.mark((function e(){var t;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return J(!1),t=h.mutate,e.next=4,t(w.id);case 4:if(!e.sent.error){e.next=7;break}return e.abrupt("return",!1);case 7:return e.abrupt("return",!0);case 8:case"end":return e.stop()}}),e)}))),[h.mutate,w.id]);return j.error?Object(T.jsxs)("span",{children:["Error while loading eventtypes: ",j.error.toString()]}):Object(T.jsxs)(r.Fragment,{children:[Object(T.jsxs)(y.a,{children:[Object(T.jsx)(x.a,{headingLevel:"h1",children:Object(T.jsxs)(A.a,{children:[Object(T.jsx)(P.a,{target:"#",children:" Bundles "}),Object(T.jsx)(ke,{to:_t.bundle(null!==W&&void 0!==W?W:""),children:$?$.display_name:Object(T.jsx)(v.a,{})}),Object(T.jsxs)(P.a,{to:"#",isActive:!0,children:[" ",_.loading||200!==(null===(c=_.payload)||void 0===c?void 0:c.status)?Object(T.jsx)(v.a,{}):_.payload.value.displayName]})]})}),Object(T.jsx)(Ae,{hasPermissions:!!K&&d(K.id),eventTypes:j.data,onCreateEventType:function(){D(!0),F(!1),I({})},onEditEventType:function(e){D(!0),F(!0),I(e)},onDeleteEventTypeModal:function(e){J(!0),I(e)}})]}),Object(T.jsx)(q,{applicationName:null===K||void 0===K?void 0:K.displayName,bundleName:null===$||void 0===$?void 0:$.display_name,templateName:null===X||void 0===X?void 0:X.map((function(e){var t;return null===(t=e.body_template)||void 0===t?void 0:t.name}))}),m&&K&&Object(T.jsx)(re,{application:K}),Object(T.jsx)(me,{isEdit:U,initialEventType:w,showModal:G,applicationName:null===K||void 0===K?void 0:K.displayName,onClose:function(){D(!1),j.reload()},onSubmit:Z,isLoading:j.loading}),Object(T.jsx)(be,{onDelete:ee,isOpen:Q,onClose:function(){J(!1),j.reload()},eventTypeName:w.name,applicationName:null===K||void 0===K?void 0:K.displayName,bundleName:null===$||void 0===$?void 0:$.display_name})]})}},{path:_t.bundle(":bundleId"),component:function(){var e,t,a,n,l=k(),o=l.hasPermission,c=l.refresh,s=l.isAdmin,m=Object(O.g)().bundleId,b=function(e){var t=Object(u.useQuery)(i.InternalResourceGetBundle.actionCreator({bundleId:e})),a=Object(r.useMemo)((function(){var e=t.payload;if(e)return Ze(e)}),[t.payload]);return Object(r.useMemo)((function(){return Object(B.a)(Object(B.a)({},t),{},{payload:a})}),[t,a])}(m),j=function(e){var t=Object(u.useQuery)(i.InternalResourceGetApplications.actionCreator({bundleId:e})),a=Object(r.useMemo)((function(){var e=t.payload;if(e)return Xe(e)}),[t.payload]);return Object(r.useMemo)((function(){return Object(B.a)(Object(B.a)({},t),{},{payload:a})}),[t,a])}(m),_=Object(u.useMutation)($e),h=Object(u.useMutation)(Ke),f=r.useState({}),E=Object(p.a)(f,2),g=E[0],R=E[1],w=r.useState(!1),I=Object(p.a)(w,2),N=I[0],S=I[1],G=r.useState(!1),D=Object(p.a)(G,2),q=D[0],H=D[1],Z=r.useState(!1),ee=Object(p.a)(Z,2),te=ee[0],ae=ee[1],ne=r.useMemo((function(){var e;if(200===(null===(e=b.payload)||void 0===e?void 0:e.status))return b.payload.value}),[null===(e=b.payload)||void 0===e?void 0:e.status,null===(t=b.payload)||void 0===t?void 0:t.value]),ie=r.useCallback((function(e){var t,a;S(!1),(0,_.mutate)({id:e.id,displayName:null!==(t=e.displayName)&&void 0!==t?t:"",name:null!==(a=e.name)&&void 0!==a?a:"",bundleId:m,ownerRole:e.ownerRole}).then((function(e){var t;return 200!==(null===(t=e.payload)||void 0===t?void 0:t.status)||s||c(),e})).then(j.query)}),[m,j.query,_.mutate,s,c]),le=r.useCallback(Object(C.a)(V.a.mark((function e(){var t;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return H(!1),t=h.mutate,e.next=4,t(g.id);case 4:if(!e.sent.error){e.next=7;break}return e.abrupt("return",!1);case 7:return e.abrupt("return",!0);case 8:case"end":return e.stop()}}),e)}))),[g.id,h.mutate]);return j.loading?Object(T.jsx)(v.a,{}):200!==(null===(a=j.payload)||void 0===a?void 0:a.status)?Object(T.jsxs)("span",{children:["Error while loading applications: ",j.errorObject.toString()]}):Object(T.jsx)(r.Fragment,{children:Object(T.jsxs)(y.a,{children:[Object(T.jsx)(x.a,{headingLevel:"h1",children:Object(T.jsxs)(A.a,{children:[Object(T.jsx)(P.a,{target:"#",children:" Bundles "}),Object(T.jsx)(P.a,{target:"#",children:b.loading||200!==(null===(n=b.payload)||void 0===n?void 0:n.status)?Object(T.jsx)(v.a,{}):b.payload.value.displayName})]})}),Object(T.jsxs)(J.a,{"aria-label":"Applications table",children:[Object(T.jsxs)(W.a,{children:[Object(T.jsx)(L.a,{children:Object(T.jsx)(M.a,{children:Object(T.jsxs)(U.a,{children:[Object(T.jsx)(F.a,{variant:"primary",type:"button",onClick:function(){S(!0),ae(!1),R({})},children:" Create Application "}),N&&Object(T.jsx)(ze,{isEdit:te,bundleName:null===ne||void 0===ne?void 0:ne.displayName,initialApplication:g,showModal:N,applicationName:g.displayName,onClose:function(){S(!1),R({}),j.query()},onSubmit:ie,isLoading:j.loading}),Object(T.jsx)(r.Fragment,{children:Object(T.jsx)(Qe,{onDelete:le,isOpen:q,onClose:function(){H(!1),j.query()},applicationName:g.displayName,bundleName:null===ne||void 0===ne?void 0:ne.displayName})})]})})}),Object(T.jsx)(Y.a,{children:["Application","Name","Event Types","Application Id"].map((function(e,t){return Object(T.jsx)($.a,{children:e},t)}))})]}),Object(T.jsx)(K.a,{children:j.payload.value.map((function(e){return Object(T.jsxs)(Y.a,{children:[Object(T.jsx)(X.a,{children:Object(T.jsx)(F.a,{variant:"link",component:function(t){return Object(T.jsx)(d.b,Object(B.a)(Object(B.a)({},t),{},{to:_t.application(e.id)}))},children:e.displayName})}),Object(T.jsx)(X.a,{children:e.name}),Object(T.jsx)(X.a,{children:Object(T.jsx)(Ye,{appId:e.id})}),Object(T.jsx)(X.a,{children:e.id}),Object(T.jsx)(X.a,{children:Object(T.jsxs)(F.a,{className:"edit",type:"button",variant:"plain",isDisabled:!o(e.id),onClick:function(){return function(e){S(!0),ae(!0),R(e)}(e)},children:[" ",Object(T.jsx)(z.a,{})," "]})}),Object(T.jsx)(X.a,{children:Object(T.jsxs)(F.a,{className:"delete",type:"button",variant:"plain",isDisabled:!s,onClick:function(){return function(e){H(!0),R(e)}(e)},children:[Object(T.jsx)(Q.a,{})," "]})})]},e.id)}))})]})]})})}},{path:_t.email(),component:function(){var e,t,a,n=Object(u.useMutation)(mt),i=r.useState(bt),l=Object(p.a)(i,2),o=l[0],c=l[1],s=r.useState(jt),d=Object(p.a)(s,2),m=d[0],b=d[1],j=r.useState(yt),v=Object(p.a)(j,2),_=v[0],h=v[1];if(r.useEffect((function(){(0,n.mutate)({subject:null!==o&&void 0!==o?o:"",body:null!==m&&void 0!==m?m:"",payload:null!==_&&void 0!==_?_:""})}),[]),n.loading)a={isLoading:!0};else if(200===(null===(e=n.payload)||void 0===e?void 0:e.status)){var f,O;a={isLoading:!1,succeeded:!0,subject:null!==(f=n.payload.value.subject)&&void 0!==f?f:"",body:null!==(O=n.payload.value.body)&&void 0!==O?O:""}}else if(400===(null===(t=n.payload)||void 0===t?void 0:t.status)){var E;a={isLoading:!1,succeeded:!1,error:null!==(E=n.payload.value.message)&&void 0!==E?E:"Unknown error"}}else a={isLoading:!1,succeeded:!1,error:"Unknown error"};var R=r.useCallback((function(){(0,n.mutate)({subject:null!==o&&void 0!==o?o:"",body:null!==m&&void 0!==m?m:"",payload:null!==_&&void 0!==_?_:""})}),[n.mutate,o,m,_]);return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(y.a,{children:Object(T.jsxs)(et.a,{children:[Object(T.jsx)(tt.a,{isFilled:!0,children:Object(T.jsx)(x.a,{headingLevel:"h1",children:"Email templates"})}),Object(T.jsx)(tt.a,{children:Object(T.jsx)(F.a,{onClick:R,children:"Render"})})]})}),Object(T.jsx)(y.a,{children:Object(T.jsxs)(ot.a,{children:[Object(T.jsx)(ct.a,{children:Object(T.jsx)(x.a,{headingLevel:"h2",children:"Result"})}),Object(T.jsx)(vt,Object(B.a)({},a))]})}),Object(T.jsxs)(y.a,{children:[Object(T.jsx)(x.a,{headingLevel:"h2",children:"Subject template"}),Object(T.jsx)(g.a,{isLineNumbersVisible:!0,isMinimapVisible:!1,code:bt,height:"50px",onChange:c})]}),Object(T.jsxs)(y.a,{children:[Object(T.jsx)(x.a,{headingLevel:"h2",children:"Body template"}),Object(T.jsx)(g.a,{isLineNumbersVisible:!0,isMinimapVisible:!1,code:jt,height:"300px",onChange:b})]}),Object(T.jsxs)(y.a,{children:[Object(T.jsx)(x.a,{headingLevel:"h2",children:"Payload"}),Object(T.jsx)(g.a,{isLineNumbersVisible:!0,isMinimapVisible:!1,code:yt,height:"300px",isLanguageLabelVisible:!0,language:g.b.json,onChange:h})]})]})}},{path:_t.emailTemplates(),component:function(){var e=k().isAdmin,t=r.useCallback((function(){history.back()}),[]);return Object(T.jsx)(T.Fragment,{children:e&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(y.a,{children:Object(T.jsx)(et.a,{children:Object(T.jsx)(tt.a,{isFilled:!0,children:Object(T.jsx)(x.a,{headingLevel:"h1",children:"Create an Email Template"})})})}),Object(T.jsxs)(y.a,{children:[Object(T.jsx)(x.a,{headingLevel:"h2",children:"Subject template"}),Object(T.jsx)(g.a,{isLineNumbersVisible:!0,code:at,isMinimapVisible:!1,height:"50px"})]}),Object(T.jsxs)(y.a,{children:[Object(T.jsx)(x.a,{headingLevel:"h2",children:"Body template"}),Object(T.jsx)(g.a,{isLineNumbersVisible:!0,code:nt,isMinimapVisible:!1,height:"300px"})]}),Object(T.jsxs)(y.a,{children:[Object(T.jsx)(x.a,{headingLevel:"h2",children:"Payload"}),Object(T.jsx)(g.a,{isLineNumbersVisible:!0,isMinimapVisible:!1,code:it,height:"300px",isLanguageLabelVisible:!0,language:g.b.json})]}),Object(T.jsx)(y.a,{children:Object(T.jsx)(ie.a,{children:Object(T.jsxs)(et.a,{hasGutter:!0,children:[Object(T.jsx)(tt.a,{children:Object(T.jsx)(F.a,{variant:"primary",type:"submit",children:"Submit"})}),Object(T.jsx)(tt.a,{children:Object(T.jsx)(F.a,{variant:"secondary",type:"reset",onClick:t,children:"Back"})})]})})})]})})}},{path:_t.messageValidator(),component:function(){var e,t,a=Object(u.useParameterizedQuery)(i.ValidationResourceValidateMessage.actionCreator),n=r.useState(dt),l=Object(p.a)(n,2),o=l[0],c=l[1],s=r.useState(),d=Object(p.a)(s,2),m=d[0],b=d[1],j=r.useCallback(Object(C.a)(V.a.mark((function e(){var t,n,i,l;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,i=JSON.parse(o),e.next=9;break;case 4:return e.prev=4,e.t0=e.catch(0),console.log(e.t0),b({errors:{$:["Not a valid json: "+e.t0.message]},code:o}),e.abrupt("return");case 9:return e.next=11,a.query({body:i});case 11:l=e.sent,200===(null===(t=l.payload)||void 0===t?void 0:t.status)?b({errors:{},code:o}):400===(null===(n=l.payload)||void 0===n?void 0:n.status)&&b({errors:l.payload.value.errors,code:o});case 13:case"end":return e.stop()}}),e,null,[[0,4]])}))),[a,o]),v=Object(T.jsx)(E.a,{icon:Object(T.jsx)(st.a,{color:ut.a.value}),toolTipText:"Validates the message",onClick:j});return(null===m||void 0===m?void 0:m.code)===o?0===Object.keys(m.errors).length?(e=h.b.success,t="Message is valid"):(e=h.b.danger,t=Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("div",{children:"Message is invalid:"}),pt(m.errors)]})):(e=h.b.warning,t=Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("div",{children:"Message has not been validated. Use the validation button"}),(null===m||void 0===m?void 0:m.errors)&&Object.keys(m.errors).length>0&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("div",{children:"Previous errors:"}),pt(m.errors)]})]})),Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(y.a,{children:Object(T.jsxs)(ot.a,{children:[Object(T.jsx)(ct.a,{isFilled:!0,children:Object(T.jsx)(x.a,{headingLevel:"h1",children:"Notification validator"})}),Object(T.jsx)(ct.a,{children:Object(T.jsx)("span",{children:"You can use this utility to verify the notification you are sending is valid and tweak as needed."})})]})}),Object(T.jsxs)(y.a,{children:[Object(T.jsx)(h.a,{isInline:!0,title:t,variant:e}),Object(T.jsx)(g.a,{showEditor:!0,isUploadEnabled:!0,isDownloadEnabled:!0,isCopyEnabled:!0,isMinimapVisible:!1,customControls:v,code:o,height:"500px",isLanguageLabelVisible:!0,language:g.b.json,onChange:c})]})]})}}],ft=function(e){return Object(T.jsxs)(O.d,{children:[ht.map((function(e){return Object(T.jsx)(O.b,{component:e.component,path:e.path},e.path)})),Object(T.jsx)(O.a,{to:_t.aggregation()})]})},Ot=a(4),Et=a(715),gt=a(706),xt=a(234),Rt=a(722),Tt=a(707),wt=function(e){var t=Object(O.h)({path:e.to,exact:!0});return Object(T.jsx)(gt.a,{isActive:!!t,children:Object(T.jsx)(d.b,{to:e.to,children:e.children})})},It=function(e){return Object(T.jsx)(xt.a,{children:Object(T.jsxs)(Rt.a,{children:[Object(T.jsx)(Tt.a,{title:"Bundles",children:e.bundles.map((function(e){return Object(T.jsx)(wt,{to:_t.bundle(e.id),children:e.displayName},e.id)}))}),Object(T.jsx)(Tt.a,{title:"Utils",isExpanded:!0,children:Object(T.jsx)(wt,{to:_t.messageValidator(),children:"Notification validator"})}),Object(T.jsx)(wt,{to:_t.email(),children:"Email templates"}),Object(T.jsx)(wt,{to:_t.aggregation(),children:"Aggregation"})]})})},Vt=a.p+"static/media/redhat-logo.f7405300.svg",Ct=Object(f.a)({width:150}),At=function(){var e=o.a.useState(!0),t=Object(p.a)(e,2),a=t[0],n=t[1],l=o.a.useCallback((function(){return n((function(e){return!e}))}),[n]),c=function(){var e=Object(u.useClient)(),t=Object(Et.a)(),a=Object(r.useState)([]),n=Object(p.a)(a,2),l=n[0],o=n[1],c=Object(r.useState)(),s=Object(p.a)(c,2),d=s[0],m=s[1],b=Object(r.useCallback)(Object(C.a)(V.a.mark((function a(){var n,l,r,c,s,u,d,p,b,j;return V.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return l=e.query,m(!0),a.next=4,l(i.InternalResourceGetBundles.actionCreator());case 4:if(r=a.sent,200!==(null===(n=r.payload)||void 0===n?void 0:n.status)){a.next=18;break}c=r.payload.value.map((function(e){var t;return{id:null!==(t=e.id)&&void 0!==t?t:"",displayName:e.display_name,applications:[]}})),s=[],u=Object(Ot.a)(r.payload.value);try{for(u.s();!(d=u.n()).done;)(p=d.value).id&&s.push(l(i.InternalResourceGetApplications.actionCreator({bundleId:p.id})))}catch(y){u.e(y)}finally{u.f()}return a.next=12,Promise.all(s);case 12:return b=a.sent,j=b.map((function(e){return e.payload})).reduce((function(e,t){return Object(Oe.a)(e,(function(e){if(200===(null===t||void 0===t?void 0:t.status)){var a=e.find((function(e){return t.value.length>0&&e.id===t.value[0].bundle_id}));a&&(a.applications=t.value.map((function(e){var t;return{id:null!==(t=e.id)&&void 0!==t?t:"",displayName:e.display_name,name:e.name,bundleId:e.bundle_id}})))}}))}),c),a.next=16,t(Promise.resolve((function(){return o(j)})));case 16:a.t0=a.sent,(0,a.t0)();case 18:m(!1);case 19:case"end":return a.stop()}}),a)}))),[e.query,t]);return Object(r.useEffect)((function(){b()}),[b]),{bundles:l,isLoading:d}}(),s=Object(u.useQuery)(i.InternalResourceGetServerInfo.actionCreator()),d=Object(r.useMemo)((function(){var e=s.payload;return 200===(null===e||void 0===e?void 0:e.status)?"PROD"===e.value.environment?{show:!0,content:"You are viewing the production environment - Any change you make here will be applied immediately and could disrupt the service."}:{show:!1}:{show:!0,content:"Could not load the current environment. Please verify the URL before making any change."}}),[s.payload]),f=Object(u.useQuery)(i.InternalPermissionResourceGetPermissions.actionCreator()),O=Object(T.jsx)(m.a,{showNavToggle:!0,logo:Object(T.jsx)(b.a,{className:Ct,src:Vt,alt:"Red Hat"}),logoProps:{href:"/internal"},isNavOpen:a,onNavToggle:l}),E=o.a.useMemo((function(){var e=f.payload;return 200===(null===e||void 0===e?void 0:e.status)?{isAdmin:e.value.is_admin,applications:e.value.applications.map((function(e){return{id:e.id,displayName:e.display_name}})),roles:e.value.roles,refresh:f.query}:{isAdmin:!1,applications:[],roles:[],refresh:f.query}}),[f.payload,f.query]);if(c.isLoading||s.loading||f.loading)return Object(T.jsx)(j.a,{header:O,children:Object(T.jsx)(y.a,{children:Object(T.jsx)(v.a,{})})});var g=Object(T.jsx)(_.a,{nav:Object(T.jsx)(It,{bundles:c.bundles}),isNavOpen:a});return Object(T.jsx)(N.Provider,{value:E,children:Object(T.jsxs)(j.a,{sidebar:g,header:O,children:[d.show&&Object(T.jsx)(y.a,{children:Object(T.jsx)(h.a,{variant:h.b.warning,title:d.content})}),Object(T.jsx)(ft,{})]})})},Pt=Object(u.createClient)({responseInterceptors:[l.validateSchemaResponseInterceptor]});s.a.render(Object(T.jsx)(r.StrictMode,{children:Object(T.jsx)(d.a,{children:Object(T.jsx)(u.ClientContextProvider,{client:Pt,children:Object(T.jsx)(At,{})})})}),document.getElementById("root"))}},[[651,1,2]]]);
//# sourceMappingURL=main.e36e8100.chunk.js.map